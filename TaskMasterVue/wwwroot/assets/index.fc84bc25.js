import{r as t,c as e,o as a,a as s,b as o,F as n,d as r,C as i,S as l,p as c,e as d,$ as u,w as p,f as m,v as k,g,t as f,h,i as v,j as b,k as w,l as y,m as T,n as _,q as L,s as x}from"./vendor.6856a254.js";import A from"src/assets/img/trash-can.png";const C=t({user:{},account:{},lists:[],tasks:[],activeList:{},activeTask:{}});const E={name:"App",setup:()=>({state:{newTask:{title:"client be updatin a tasky boi",id:5}},appState:e((()=>C)),account:e((()=>C.account))})},I=o("footer",null,null,-1);E.render=function(t,e,i,l,c,d){const u=r("Navbar"),p=r("router-view");return a(),s(n,null,[o("header",null,[o(u)]),o("main",null,[o(p)]),I],64)};class S{constructor(t){this.id=t.id,this.title=t.title,this.creatorId=t.creatorId}}const O=window.location.origin.includes("localhost"),P=O?"https://localhost:5001":"";function U(t,e){if(O)console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e)}}const j={log(){U("log",arguments)},error(){U("error",arguments)},warn(){U("warn",arguments)},assert(){U("assert",arguments)},trace(){U("trace",arguments)}},H=i.create({baseURL:P,timeout:8e3});const B=new class{async getAll(){const t=await H.get("api/lists");C.lists=t.data.map((t=>new S(t)))}async getListById(t){const e=await H.get("api/lists/"+t);C.activeList=new S(e.data)}async createList(t){const e=await H.post("api/lists",t);C.lists.push(new S(e.data))}async updateList(t){const e=await H.put("api/lists/"+t.id,t);C.lists=C.lists.filter((e=>e.id!==t.id)),C.lists.push(new S(e.data))}async deleteList(t){await H.delete("api/lists/"+t),C.lists=C.lists.filter((e=>e.id!==t))}};class N{static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",s="Yes, delete it!"){try{return!!(await l.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:s,position:"center"})).isConfirmed}catch(o){return!1}}static toast(t="Warning!",e="warning",a="top-end",s=3e3,o=!0){l.fire({title:t,icon:e,position:a,timer:s,timerProgressBar:o,toast:!0,showConfirmButton:!1})}}const R={setup(){const t={newList:{}};return{state:t,createList(){try{B.createList(t.newList),u("#createList").modal("toggle"),document.getElementById("list-form").reset()}catch(e){N.toast(e,"error")}}}}},V=g("data-v-264c90f4");c("data-v-264c90f4");const D={class:"modal fade",id:"createList",tabindex:"-1",role:"dialog","aria-labelledby":"createListModal","aria-hidden":"true"},M={class:"modal-dialog modal-dialog-centered",role:"document"},$=o("div",{class:"modal-header"},[o("h5",{class:"modal-title",id:"exampleModalLongTitle"}," Modal title "),o("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[o("span",{"aria-hidden":"true"},"Ã—")])],-1),z={class:"modal-body form-group"},q=o("label",{for:"List Name","aria-readonly":"List name"},null,-1),F=o("div",{class:"modal-footer"},[o("button",{type:"submit",class:"btn btn-primary"}," Create List ")],-1);d();const Y=V(((t,e,n,r,i,l)=>(a(),s("div",D,[o("div",M,[o("form",{class:"modal-content",onSubmit:e[2]||(e[2]=p(((...t)=>r.createList&&r.createList(...t)),["prevent"])),id:"list-form"},[$,o("div",z,[q,m(o("input",{class:"form-control",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>r.state.newList.title=t),placeholder:"New list name..."},null,512),[[k,r.state.newList.title]])]),F],32)])]))));R.render=Y,R.__scopeId="data-v-264c90f4";var W=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:R});class X{constructor(t){this.id=t.id,this.title=t.title,this.creatorId=t.creatorId,this.listId=t.listId,this.completed=t.completed}}const J=new class{async getAll(){const t=await H.get("api/tasks");C.tasks=t.data.map((t=>new X(t))),j.log(t.data)}async getAllByListId(t){const e=await H.get("api/lists/"+t+"/tasks");C.tasks=e.data.map((t=>new X(t)))}async getOne(t){const e=await H.get("api/tasks/"+t);C.activeTask=new X(e.data)}async createTask(t){const e=await H.post("api/tasks",t);C.tasks.push(new X(e.data))}async updateTask(t){const e=await H.put("api/tasks/"+t.id,t);C.tasks=C.tasks.filter((e=>e.id!==t.id)),C.tasks.push(new X(e.data)),C.tasks=C.tasks.sort((function(t,e){return t.id-e.id}))}async deleteTask(t){await H.delete("api/tasks/"+t),C.tasks=C.tasks.filter((e=>e.id!==t))}};const K={props:{list:{type:Object,required:!0}},setup(a){const s=t({newTask:{}}),o="task-form-"+a.list.id;return{tasks:e((()=>C.tasks.filter((t=>t.listId===a.list.id)))),state:s,taskFormId:o,async createTask(){try{s.newTask.listId=a.list.id,await J.createTask(s.newTask),s.newTask.title=""}catch(t){N.toast(t,"error")}},async deleteList(t){try{await N.confirm()&&await B.deleteList(t)}catch(e){N.toast(e,"error")}}}}},G=g("data-v-87ec1626");c("data-v-87ec1626");const Q={class:"card mt-3 "},Z={class:"card-header align-items-center d-flex list-title"},tt={class:"card-body"},et={class:"form-group"},at=o("label",{for:"Task Name","aria-readonly":"Task Name"},null,-1),st=o("button",{type:"submit",class:"btn btn-primary btn-sm mt-2"}," Create task ",-1);d();const ot=G(((t,e,i,l,c,d)=>{const u=r("Task");return a(),s("div",Q,[o("div",Z,[o("span",null,f(i.list.title),1),o("i",{class:"trash grow hoverable mdi mdi-trash-can",onClick:e[1]||(e[1]=t=>l.deleteList(i.list.id))})]),o("div",tt,[(a(!0),s(n,null,h(l.tasks,(t=>(a(),s(u,{key:t.id,task:t},null,8,["task"])))),128))]),o("form",{class:"card-footer",onSubmit:e[3]||(e[3]=p(((...t)=>l.createTask&&l.createTask(...t)),["prevent"])),id:l.taskFormId},[o("div",et,[at,m(o("input",{type:"text",class:"form-control","aria-describedby":"helpId",placeholder:"New task name...","onUpdate:modelValue":e[2]||(e[2]=t=>l.state.newTask.title=t)},null,512),[[k,l.state.newTask.title]]),st])],40,["id"])])}));K.render=ot,K.__scopeId="data-v-87ec1626";var nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:K});let rt;const it={},lt=function(t,e){if(!e||0===e.length)return t();if(void 0===rt){const t=document.createElement("link").relList;rt=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in it)return;it[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":rt,e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t()))};function ct(t){return()=>function(t){switch(t){case"./pages/AccountPage.vue":return lt((()=>import("./AccountPage.66bed057.js")),["/assets/AccountPage.66bed057.js","/assets/AccountPage.f3fa63f7.css","/assets/vendor.6856a254.js"]);case"./pages/HomePage.vue":return lt((()=>import("./HomePage.21d820ca.js")),["/assets/HomePage.21d820ca.js","/assets/HomePage.f71a6f53.css","/assets/vendor.6856a254.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+t))}}(`./pages/${t}.vue`)}const dt=[{path:"/",name:"Home",component:ct("HomePage"),beforeEnter:w},{path:"/account",name:"Account",component:ct("AccountPage"),beforeEnter:w}],ut=v({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:b(),routes:dt});const pt=new class{async getAccount(){try{const t=await H.get("/account");C.account=t.data}catch(t){j.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}},mt=y({domain:"ericmwakeman.us.auth0.com",clientId:"wbJXtU8mSFAMwrXFL7AX2JP1b0xnrvKl",audience:"https://ericmwakeman.com",useRefreshTokens:!0,onRedirectCallback:t=>{ut.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});async function kt(t){if(!mt.isAuthenticated)return t;const e=1e3*mt.identity.exp,a=e<Date.now(),s=e<Date.now()+432e5;return a?await mt.loginWithPopup():s&&(await mt.getTokenSilently(),H.defaults.headers.authorization=mt.bearer),t}mt.on(mt.AUTH_EVENTS.AUTHENTICATED,(async function(){H.defaults.headers.authorization=mt.bearer,H.interceptors.request.use(kt),C.user=mt.user,await pt.getAccount()}));const gt={setup:()=>({state:t({dropOpen:!1}),user:e((()=>C.user)),async login(){mt.loginWithPopup()},async logout(){mt.logout({returnTo:window.location.origin})}})},ft=g("data-v-0d74039e");c("data-v-0d74039e");const ht={class:"navbar navbar-expand-lg navbar-dark bg-dark"},vt=o("div",{class:"d-flex flex-column align-items-center"},[o("img",{alt:"logo",src:"/assets/cw-logo.71baeadb.png",height:"45"})],-1),bt=o("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1),wt={class:"collapse navbar-collapse",id:"navbarText"},yt={class:"navbar-nav mr-auto"},Tt={class:"nav-item"},_t=T(" Home "),Lt={class:"navbar-text"},xt={key:1,class:"dropdown"},At={class:"mx-3"},Ct=o("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);d();const Et=ft(((t,e,n,i,l,c)=>{const d=r("router-link");return a(),s("nav",ht,[o(d,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:ft((()=>[vt])),_:1}),bt,o("div",wt,[o("ul",yt,[o("li",Tt,[o(d,{to:{name:"Home"},class:"nav-link"},{default:ft((()=>[_t])),_:1})])]),o("span",Lt,[i.user.isAuthenticated?(a(),s("div",xt,[o("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>i.state.dropOpen=!i.state.dropOpen)},[o("img",{src:i.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),o("span",At,f(i.user.name),1)]),o("div",{class:["dropdown-menu p-0 list-group w-100",{show:i.state.dropOpen}],onClick:e[4]||(e[4]=t=>i.state.dropOpen=!1)},[o(d,{to:{name:"Account"}},{default:ft((()=>[Ct])),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>i.logout&&i.logout(...t))}," logout ")],2)])):(a(),s("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:e[1]||(e[1]=(...t)=>i.login&&i.login(...t))}," Login "))])])])}));gt.render=Et,gt.__scopeId="data-v-0d74039e";var It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:gt});const St={props:{task:{type:Object,required:!0}},setup(e){const a=t({currentTask:e.task});return{state:a,async deleteTask(t){try{await N.confirm()&&J.deleteTask(t)}catch(e){N.toast(e,"error","center")}},async updateTask(){try{await J.updateTask(a.currentTask)}catch(t){N.toast(t,"error","center")}}}}},Ot=g("data-v-129ecf2f");c("data-v-129ecf2f");const Pt={class:"card my-2 shadow rounded justify-content-center d-flex "},Ut={key:0,for:"Unfinished Task",class:"ml-2"},jt={key:1,for:"Completed Task",class:"ml-2 complete"};d();const Ht=Ot(((t,e,n,r,i,l)=>(a(),s("div",Pt,[0==n.task.completed?(a(),s("label",Ut,[T(f(n.task.title)+" ",1),m(o("input",{type:"checkbox",name:"Task Completed",class:"hoverable","onUpdate:modelValue":e[1]||(e[1]=t=>r.state.currentTask.completed=t),onChange:e[2]||(e[2]=(...t)=>r.updateTask&&r.updateTask(...t))},null,544),[[_,r.state.currentTask.completed]])])):L("",!0),1==n.task.completed?(a(),s("label",jt,[T(f(n.task.title)+" ",1),m(o("input",{type:"checkbox",name:"Task Completed",class:"hoverable","onUpdate:modelValue":e[3]||(e[3]=t=>r.state.currentTask.completed=t),onChange:e[4]||(e[4]=(...t)=>r.updateTask&&r.updateTask(...t)),checked:""},null,544),[[_,r.state.currentTask.completed]])])):L("",!0),o("img",{src:A,alt:"delete task",class:"hoverable grow trash",onClick:e[5]||(e[5]=t=>r.deleteTask(n.task.id))})]))));St.render=Ht,St.__scopeId="data-v-129ecf2f";var Bt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:St});const Nt=x(E);!function(t){const e={"./components/CreateList.vue":W,"./components/List.vue":nt,"./components/Navbar.vue":It,"./components/Task.vue":Bt};Object.entries(e).forEach((([e,a])=>{const s=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(s,a.default)}))}(Nt),Nt.use(ut).mount("#app");export{C as A,N as P,B as l,J as t};
