import{r as t,c as e,o as a,a as s,b as n,F as o,d as r,C as i,S as l,p as c,e as d,$ as u,w as p,f as m,v as k,g,t as b,h,i as v,j as w,k as f,l as y,m as T,n as _,q as L,s as x}from"./vendor.6856a254.js";const A=t({user:{},account:{},lists:[],tasks:[],activeList:{},activeTask:{}});const C={name:"App",setup:()=>({state:{newTask:{title:"client be updatin a tasky boi",id:5}},appState:e((()=>A)),account:e((()=>A.account))})},E=n("footer",null,null,-1);C.render=function(t,e,i,l,c,d){const u=r("Navbar"),p=r("router-view");return a(),s(o,null,[n("header",null,[n(u)]),n("main",null,[n(p)]),E],64)};class I{constructor(t){this.id=t.id,this.title=t.title,this.creatorId=t.creatorId}}const S=window.location.origin.includes("localhost"),O=S?"https://localhost:5001":"";function P(t,e){if(S)console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e)}}const U={log(){P("log",arguments)},error(){P("error",arguments)},warn(){P("warn",arguments)},assert(){P("assert",arguments)},trace(){P("trace",arguments)}},j=i.create({baseURL:O,timeout:8e3});const H=new class{async getAll(){const t=await j.get("api/lists");A.lists=t.data.map((t=>new I(t)))}async getListById(t){const e=await j.get("api/lists/"+t);A.activeList=new I(e.data)}async createList(t){const e=await j.post("api/lists",t);A.lists.push(new I(e.data))}async updateList(t){const e=await j.put("api/lists/"+t.id,t);A.lists=A.lists.filter((e=>e.id!==t.id)),A.lists.push(new I(e.data))}async deleteList(t){await j.delete("api/lists/"+t),A.lists=A.lists.filter((e=>e.id!==t))}};class B{static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",s="Yes, delete it!"){try{return!!(await l.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:s,position:"center"})).isConfirmed}catch(n){return!1}}static toast(t="Warning!",e="warning",a="top-end",s=3e3,n=!0){l.fire({title:t,icon:e,position:a,timer:s,timerProgressBar:n,toast:!0,showConfirmButton:!1})}}const N={setup(){const t={newList:{}};return{state:t,createList(){try{H.createList(t.newList),u("#createList").modal("toggle"),document.getElementById("list-form").reset()}catch(e){B.toast(e,"error")}}}}},R=g("data-v-264c90f4");c("data-v-264c90f4");const V={class:"modal fade",id:"createList",tabindex:"-1",role:"dialog","aria-labelledby":"createListModal","aria-hidden":"true"},D={class:"modal-dialog modal-dialog-centered",role:"document"},M=n("div",{class:"modal-header"},[n("h5",{class:"modal-title",id:"exampleModalLongTitle"}," Modal title "),n("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[n("span",{"aria-hidden":"true"},"Ã—")])],-1),$={class:"modal-body form-group"},z=n("label",{for:"List Name","aria-readonly":"List name"},null,-1),q=n("div",{class:"modal-footer"},[n("button",{type:"submit",class:"btn btn-primary"}," Create List ")],-1);d();const F=R(((t,e,o,r,i,l)=>(a(),s("div",V,[n("div",D,[n("form",{class:"modal-content",onSubmit:e[2]||(e[2]=p(((...t)=>r.createList&&r.createList(...t)),["prevent"])),id:"list-form"},[M,n("div",$,[z,m(n("input",{class:"form-control",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>r.state.newList.title=t),placeholder:"New list name..."},null,512),[[k,r.state.newList.title]])]),q],32)])]))));N.render=F,N.__scopeId="data-v-264c90f4";var Y=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:N});class W{constructor(t){this.id=t.id,this.title=t.title,this.creatorId=t.creatorId,this.listId=t.listId,this.completed=t.completed}}const X=new class{async getAll(){const t=await j.get("api/tasks");A.tasks=t.data.map((t=>new W(t))),U.log(t.data)}async getAllByListId(t){const e=await j.get("api/lists/"+t+"/tasks");A.tasks=e.data.map((t=>new W(t)))}async getOne(t){const e=await j.get("api/tasks/"+t);A.activeTask=new W(e.data)}async createTask(t){const e=await j.post("api/tasks",t);A.tasks.push(new W(e.data))}async updateTask(t){const e=await j.put("api/tasks/"+t.id,t);A.tasks=A.tasks.filter((e=>e.id!==t.id)),A.tasks.push(new W(e.data)),A.tasks=A.tasks.sort((function(t,e){return t.id-e.id}))}async deleteTask(t){await j.delete("api/tasks/"+t),A.tasks=A.tasks.filter((e=>e.id!==t))}};const J={props:{list:{type:Object,required:!0}},setup(a){const s=t({newTask:{}}),n="task-form-"+a.list.id;return{tasks:e((()=>A.tasks.filter((t=>t.listId===a.list.id)))),state:s,taskFormId:n,async createTask(){try{s.newTask.listId=a.list.id,await X.createTask(s.newTask),s.newTask.title=""}catch(t){B.toast(t,"error")}},async deleteList(t){try{await B.confirm()&&await H.deleteList(t)}catch(e){B.toast(e,"error")}}}}},K=g("data-v-87ec1626");c("data-v-87ec1626");const G={class:"card mt-3 "},Q={class:"card-header align-items-center d-flex list-title"},Z={class:"card-body"},tt={class:"form-group"},et=n("label",{for:"Task Name","aria-readonly":"Task Name"},null,-1),at=n("button",{type:"submit",class:"btn btn-primary btn-sm mt-2"}," Create task ",-1);d();const st=K(((t,e,i,l,c,d)=>{const u=r("Task");return a(),s("div",G,[n("div",Q,[n("span",null,b(i.list.title),1),n("i",{class:"trash grow hoverable mdi mdi-trash-can",onClick:e[1]||(e[1]=t=>l.deleteList(i.list.id))})]),n("div",Z,[(a(!0),s(o,null,h(l.tasks,(t=>(a(),s(u,{key:t.id,task:t},null,8,["task"])))),128))]),n("form",{class:"card-footer",onSubmit:e[3]||(e[3]=p(((...t)=>l.createTask&&l.createTask(...t)),["prevent"])),id:l.taskFormId},[n("div",tt,[et,m(n("input",{type:"text",class:"form-control","aria-describedby":"helpId",placeholder:"New task name...","onUpdate:modelValue":e[2]||(e[2]=t=>l.state.newTask.title=t)},null,512),[[k,l.state.newTask.title]]),at])],40,["id"])])}));J.render=st,J.__scopeId="data-v-87ec1626";var nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:J});let ot;const rt={},it=function(t,e){if(!e||0===e.length)return t();if(void 0===ot){const t=document.createElement("link").relList;ot=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in rt)return;rt[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":ot,e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t()))};function lt(t){return()=>function(t){switch(t){case"./pages/AccountPage.vue":return it((()=>import("./AccountPage.ce843466.js")),["/assets/AccountPage.ce843466.js","/assets/AccountPage.f3fa63f7.css","/assets/vendor.6856a254.js"]);case"./pages/HomePage.vue":return it((()=>import("./HomePage.283050c9.js")),["/assets/HomePage.283050c9.js","/assets/HomePage.f71a6f53.css","/assets/vendor.6856a254.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+t))}}(`./pages/${t}.vue`)}const ct=[{path:"/",name:"Home",component:lt("HomePage"),beforeEnter:f},{path:"/account",name:"Account",component:lt("AccountPage"),beforeEnter:f}],dt=v({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:w(),routes:ct});const ut=new class{async getAccount(){try{const t=await j.get("/account");A.account=t.data}catch(t){U.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}},pt=y({domain:"ericmwakeman.us.auth0.com",clientId:"wbJXtU8mSFAMwrXFL7AX2JP1b0xnrvKl",audience:"https://ericmwakeman.com",useRefreshTokens:!0,onRedirectCallback:t=>{dt.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});async function mt(t){if(!pt.isAuthenticated)return t;const e=1e3*pt.identity.exp,a=e<Date.now(),s=e<Date.now()+432e5;return a?await pt.loginWithPopup():s&&(await pt.getTokenSilently(),j.defaults.headers.authorization=pt.bearer),t}pt.on(pt.AUTH_EVENTS.AUTHENTICATED,(async function(){j.defaults.headers.authorization=pt.bearer,j.interceptors.request.use(mt),A.user=pt.user,await ut.getAccount()}));const kt={setup:()=>({state:t({dropOpen:!1}),user:e((()=>A.user)),async login(){pt.loginWithPopup()},async logout(){pt.logout({returnTo:window.location.origin})}})},gt=g("data-v-0d74039e");c("data-v-0d74039e");const bt={class:"navbar navbar-expand-lg navbar-dark bg-dark"},ht=n("div",{class:"d-flex flex-column align-items-center"},[n("img",{alt:"logo",src:"/assets/cw-logo.71baeadb.png",height:"45"})],-1),vt=n("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[n("span",{class:"navbar-toggler-icon"})],-1),wt={class:"collapse navbar-collapse",id:"navbarText"},ft={class:"navbar-nav mr-auto"},yt={class:"nav-item"},Tt=T(" Home "),_t={class:"navbar-text"},Lt={key:1,class:"dropdown"},xt={class:"mx-3"},At=n("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);d();const Ct=gt(((t,e,o,i,l,c)=>{const d=r("router-link");return a(),s("nav",bt,[n(d,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:gt((()=>[ht])),_:1}),vt,n("div",wt,[n("ul",ft,[n("li",yt,[n(d,{to:{name:"Home"},class:"nav-link"},{default:gt((()=>[Tt])),_:1})])]),n("span",_t,[i.user.isAuthenticated?(a(),s("div",Lt,[n("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>i.state.dropOpen=!i.state.dropOpen)},[n("img",{src:i.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),n("span",xt,b(i.user.name),1)]),n("div",{class:["dropdown-menu p-0 list-group w-100",{show:i.state.dropOpen}],onClick:e[4]||(e[4]=t=>i.state.dropOpen=!1)},[n(d,{to:{name:"Account"}},{default:gt((()=>[At])),_:1}),n("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>i.logout&&i.logout(...t))}," logout ")],2)])):(a(),s("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:e[1]||(e[1]=(...t)=>i.login&&i.login(...t))}," Login "))])])])}));kt.render=Ct,kt.__scopeId="data-v-0d74039e";var Et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:kt});const It={props:{task:{type:Object,required:!0}},setup(e){const a=t({currentTask:e.task});return{state:a,async deleteTask(t){try{await B.confirm()&&X.deleteTask(t)}catch(e){B.toast(e,"error","center")}},async updateTask(){try{await X.updateTask(a.currentTask)}catch(t){B.toast(t,"error","center")}}}}},St=g("data-v-797ecc0b");c("data-v-797ecc0b");const Ot={class:"card my-2 shadow rounded justify-content-center d-flex "},Pt={key:0,for:"Unfinished Task",class:"ml-2"},Ut={key:1,for:"Completed Task",class:"ml-2 complete"};d();const jt=St(((t,e,o,r,i,l)=>(a(),s("div",Ot,[0==o.task.completed?(a(),s("label",Pt,[T(b(o.task.title)+" ",1),m(n("input",{type:"checkbox",name:"Task Completed",class:"hoverable","onUpdate:modelValue":e[1]||(e[1]=t=>r.state.currentTask.completed=t),onChange:e[2]||(e[2]=(...t)=>r.updateTask&&r.updateTask(...t))},null,544),[[_,r.state.currentTask.completed]])])):L("",!0),1==o.task.completed?(a(),s("label",Ut,[T(b(o.task.title)+" ",1),m(n("input",{type:"checkbox",name:"Task Completed",class:"hoverable","onUpdate:modelValue":e[3]||(e[3]=t=>r.state.currentTask.completed=t),onChange:e[4]||(e[4]=(...t)=>r.updateTask&&r.updateTask(...t)),checked:""},null,544),[[_,r.state.currentTask.completed]])])):L("",!0),n("i",{alt:"delete task",class:"hoverable grow trash mdi mdi-trash-can",onClick:e[5]||(e[5]=t=>r.deleteTask(o.task.id))})]))));It.render=jt,It.__scopeId="data-v-797ecc0b";var Ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:It});const Bt=x(C);!function(t){const e={"./components/CreateList.vue":Y,"./components/List.vue":nt,"./components/Navbar.vue":Et,"./components/Task.vue":Ht};Object.entries(e).forEach((([e,a])=>{const s=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(s,a.default)}))}(Bt),Bt.use(dt).mount("#app");export{A,B as P,H as l,X as t};
